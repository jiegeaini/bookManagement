<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">


<head>
<title>jie</title>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
<link href="static/semantic/dist/semantic.min.css" rel="stylesheet" />
<link href="static/css/ionicons.min.css" rel="stylesheet" />
<link href="static/css/main.css?a=2" rel="stylesheet" />
<link href="static/css/pace.css" rel="stylesheet" />
<style>
#logo_item {
	padding: 0;
}
</style>
</head>
<body>
	<div id="contextWrap">
		<!--sidebar-->
		<div
			class="ui sidebar vertical left menu overlay  borderless visible sidemenu inverted  grey"
			style="-webkit-transition-duration: 0.1s; transition-duration: 0.1s;"
			data-color="grey">
			<a id="logo_item" class="item logo" href="index.html"> <img
				src="static/img/book-3.jpg" alt="stagblogo" />
			</a>
			<div class="ui accordion inverted">
				<div class="title item">
					<i class="dropdown icon"></i> 书籍信息管理
				</div>
				<div class="content">
					<a class="item" href="getBookViewPage"> 书籍信息查询 </a> <a class="item"
						href="getAddBookPage"> 书籍信息增加 </a> <a class="item"
						href="getCategoryPage"> 书籍分类信息查询 </a> <a class="item"
						href="getAddCategoryPage"> 书籍分类信息增加 </a>
				</div>
				<div class="title item">
					<i class="dropdown icon"></i> 作者信息管理
				</div>
				<div class="content">
					<a href="getAuthorViewPage" class="item"> 作者信息查询 </a> <a
						href="getAddAuthorPage" class="item"> 作者信息增加 </a>
				</div>
				<div class="title item">
					<i class="dropdown icon"></i> 读者信息管理
				</div>
				<div class="content">
					<a href="getReaderViewPage" class="item"> 读者信息查看 </a> <a
						href="getAddReaderPage" class="item"> 读者信息增加 </a>
				</div>
				<div class="title item">
					<i class="dropdown icon"></i> 借书信息管理
				</div>
				<div class="content">
					<a href="getReader_bookViewPage" class="item"> 借书信息查看 </a> <a
						href="getAddReader_bookPage" class="item"> 借书信息增加 </a> <a
						href="getStateViewPage" class="item"> 借书状态信息查看 </a> <a
						href="getAddStatePage" class="item"> 借书状态信息增加 </a>
				</div>
				<div class="title item">
					<i class="dropdown icon"></i> 权限信息管理
				</div>
				<div class="content">
					<a href="getUserViewPage" class="item"> 后台管理人员信息查看 </a> <a
						href="getAddUserPage" class="item"> 后台管理人员信息增加 </a> <a
						href="getRoleViewPage" class="item"> 角色信息查看 </a> <a
						href="getAddRolePage" class="item"> 角色信息增加 </a> <a
						href="getPermissionViewPage" class="item"> 权限信息查看 </a> <a
						href="getAddPermissionPage" class="item"> 权限信息增加 </a>
				</div>
			</div>

		</div>
		<!--sidebar-->

		<div class="pusher">
			<!--navbar-->
			<div class="navslide navwrap">
				<div class="ui menu icon borderless grid"
					data-color="inverted white">
					<a class="item labeled openbtn"> <i
						class="list layout large icon"></i>
					</a> <a class="item labeled expandit"
						onclick="toggleFullScreen(document.body)"> <i
						class="maximize large icon"></i>
					</a>

					<div class="right menu colhidden">

						<div class="ui dropdown item">
							<img class="ui mini circular image" src="static/img/tou.jpg"
								alt="label-image" />
							<div class="menu">
								<a class="item" href="outLogin">Sign Out</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--navbar-->
			<!--maincontent-->
			<div class="mainWrap navslide">
				<div class="ui equal width left aligned padded grid stackable">
					<!--Site Content-->
					<!--Site Content-->

					<div class="row">
						<div class="sixteen wide column">
							<div class="ui segments">
								<div class="ui segment">
									<h5 class="ui header">图表</h5>
								</div>
								<div class="ui segment">
									<div class="ui segments">
										<div class="ui segment">
											<h5 class="ui header">借书前十名书籍</h5>
										</div>
										<div class="ui segment">
											<div id="c1"></div>
										</div>
									</div>
									<div class="ui segments">
										<div class="ui segment">
											<h5 class="ui header">借书前十名作者</h5>
										</div>
										<div class="ui segment">
											<div id="c1_1"></div>
										</div>
									</div>
									<div class="ui segments">
										<div class="ui segment">
											<h5 class="ui header">借书前十名读者</h5>
										</div>
										<div class="ui segment">
											<div id="c1_2"></div>
										</div>
									</div>

									<div class="ui segments">
										<div class="ui segment">
											<h5 class="ui header">各分类占比图</h5>
										</div>
										<div class="ui segment">
											<div class="row ui two cloumn grid stackable"
												style="padding-top: 1em;">
												<div class="ui cloumn">
													<div class="ui segment">
														<h5 class="ui header">图书分类占比图</h5>
													</div>
													<div id="c3"></div>
												</div>
												<div class="ui cloumn">
													<div class="ui segment">
														<h5 class="ui header">最热图书分类占比图</h5>
													</div>
													<div id="c4"></div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--maincontent-->
		</div>
	</div>



	<!--jquery-->
	<script src="../../webapp/static/js/jquery-2.1.4.min.js"
		th:src="@{/static/js/jquery-2.1.4.min.js}"></script>
	<!--jquery-->
	<!--semantic-->
	<script src="../../webapp/static/semantic/dist/semantic.min.js"
		th:src="@{/static/semantic/dist/semantic.min.js}"></script>
	<!--semantic-->

	<script src="../../webapp/static/js/jquery.dataTables.js"
		th:src="@{/static/js/jquery.dataTables.js}"></script>
	<script src="../../webapp/static/js/custom-datatable.js"
		th:src="@{/static/js/custom-datatable.js}"></script>
	<script src="../../webapp/static/js/g2.min.js"
		th:src="@{/static/js/g2.min.js}"></script>
	<script src="../js/main.js" th:src="@{/static/js/main.js}"></script>
	<script>
		$(".ui.dropdown").dropdown({
			allowCategorySelection : true,
			transition : "fade up"
		});

		$('.ui.accordion').accordion({
			selector : {}
		});

		function newChart(name, container, width, height) {
			// Step 1: 创建 Chart 对象
			name = new G2.Chart({
				container : container, // 指定图表容器 ID
				width : width,
				height : height
			// 指定图表高度
			});

			return name;
		}

		// 进行绘制图形
		function graphics(variableName, data, shape) {

			if ("条形" == shape) {
				// Step 2: 载入数据源
				variableName.source(data)
				// Step 3：创建图形语法，绘制柱状图，由 genre 和 sold 两个属性决定图形位置，genre 映射至 x 轴，sold 映射至 y 轴
				variableName.interval().position('name*num').color('name')
				// Step 4: 渲染图表
				variableName.render()
			} else if ("线形" == shape) {
				// Step 2: 载入数据源
				variableName.source(data);
				// Step 3：创建图形语法，绘制柱状图，由 genre 和 sold 两个属性决定图形位置，genre 映射至 x 轴，sold 映射至 y 轴
				variableName.line().position('genre*sold')
				variableName.point().position('genre*sold').size(4).shape(
						'circle').style({
					stroke : '#fff',
					lineWidth : 1
				});
				// Step 4: 渲染图表
				variableName.render();
			} else if ("饼状" == shape) {
				variableName.source(data, {
					percent : {
						formatter : function formatter(val) {
							val = val * 100 + '%';
							return val;
						}
					}
				});
				variableName.coord('theta', {
					radius : 0.75
				});
				variableName
						.tooltip({
							showTitle : false,
							itemTpl : '<li><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'
						});
				variableName.intervalStack().position('percent').color('name')
						.label('percent', {
							formatter : function formatter(val, name) {
								return name.point.name + ': ' + val;
							}
						}).tooltip('name*percent', function(name, percent) {
							percent = percent * 100 + '%';
							return {
								name : name,
								value : percent
							};
						}).style({
							lineWidth : 1,
							stroke : '#fff'
						});
				variableName.render();
			}

		}
		// 			var TbookRanking,TbookAuthor,TbookReader,XbookNumber,BbookCategory,BbookReaderBook;
		// 			graphics(newChart(TbookRanking, "c1",1000, 300), data, "条形");
		// 			graphics(newChart(TbookAuthor, "c1_1",1000, 300), data, "条形");
		// 			graphics(newChart(TbookReader, "c1_2",1000, 300), data, "条形");
		// 			graphics(newChart(XbookNumber, "c2", 1000, 300), data, "线形");
		// 			graphics(newChart(BbookCategory, "c3", 500, 300), data1, "饼状");
		// 			graphics(newChart(BbookReaderBook, "c4", 500, 300), data1, "饼状");

		$.ajax({
			type : "GET",
			url : "geTenbooks",
			dataType : "json",
			async : false,
			success : function(data) {
				var TbookRanking
				graphics(newChart(TbookRanking, "c1", 1000, 300), data, "条形");
			},
			error : function() {
				alert("错误")
			}
		})

		$.ajax({
			type : "GET",
			url : "geTenauthor",
			dataType : "json",
			async : false,
			success : function(data) {
				var TbookAuthor
				graphics(newChart(TbookAuthor, "c1_1", 1000, 300), data, "条形");
			},
			error : function() {
				alert("错误")
			}
		})

		$.ajax({
			type : "GET",
			url : "geTenreader",
			dataType : "json",
			async : false,
			success : function(data) {
				var TbookReader
				graphics(newChart(TbookReader, "c1_2", 1000, 300), data, "条形");
			},
			error : function() {
				alert("错误")
			}
		})

		$.ajax({
			type : "GET",
			url : "geTencategory_num",
			dataType : "json",
			async : false,
			success : function(data) {
				var BbookCategory
				graphics(newChart(BbookCategory, "c3", 500, 300), data, "饼状");
			},
			error : function() {
				alert("错误")
			}
		})

		$
				.ajax({
					type : "GET",
					url : "geTencategory",
					dataType : "json",
					async : false,
					success : function(data) {
						var BbookReaderBook
						graphics(newChart(BbookReaderBook, "c4", 500, 300),
								data, "饼状");
					},
					error : function() {
						alert("错误")
					}
				})
	</script>
</body>
</html>







